{"version":3,"sources":["controllers/image-detail-controller/image-detail-controller.es6"],"names":["ImageDetailController","$scope","detailImageService","$mdDialog","toaster","init","showValid","like","dislike","image","getImage","setLike","setDislike","close","cancel","addComment","nickname","text","commentForm","$valid","comment","own","data","Date","now","commentText","comments","push","pop","countActions","action","count","image_likes","forEach","el","ind","arr","like_type","$inject"],"mappings":";;;;;;;;;;IAAMA,qB;AACF,mCAAYC,MAAZ,EAAqBC,kBAArB,EAAyCC,SAAzC,EAAoDC,OAApD,EAA6D;AAAA;;AACzD,aAAKC,IAAL,CAAUJ,MAAV,EAAmBC,kBAAnB,EAAuCC,SAAvC,EAAiDC,OAAjD;AACH;;;;6BACIH,M,EAAQC,kB,EAAoBC,S,EAAWC,O,EAAS;AACjDH,mBAAOK,SAAP,GAAmB,KAAnB;AACAL,mBAAOM,IAAP,GAAc,KAAd;AACAN,mBAAOO,OAAP,GAAiB,KAAjB;;AAEAP,mBAAOQ,KAAP,GAAeP,mBAAmBQ,QAAnB,EAAf;;AAEAT,mBAAOU,OAAP,GAAiB,YAAM;AACnBV,uBAAOM,IAAP,GAAc,CAACN,OAAOM,IAAtB;AACH,aAFD;;AAIAN,mBAAOW,UAAP,GAAoB,YAAM;AACtBX,uBAAOO,OAAP,GAAiB,CAACP,OAAOO,OAAzB;AACH,aAFD;;AAIAP,mBAAOY,KAAP,GAAe,YAAM;AACjBV,0BAAUW,MAAV;AACH,aAFD;;AAIAb,mBAAOc,UAAP,GAAoB,UAACC,QAAD,EAAWC,IAAX,EAAoB;AACpC,oBAAGhB,OAAOiB,WAAP,CAAmBC,MAAtB,EAA6B;AACzB,wBAAIC,UAAU,EAAd;AACAA,4BAAQC,GAAR,GAAcL,QAAd;AACAI,4BAAQH,IAAR,GAAeA,IAAf;AACAG,4BAAQE,IAAR,GAAeC,KAAKC,GAAL,EAAf;;AAEAvB,2BAAOe,QAAP,GAAkB,EAAlB;AACAf,2BAAOwB,WAAP,GAAqB,EAArB;AACAxB,2BAAOQ,KAAP,CAAaiB,QAAb,CAAsBC,IAAtB,CAA2BP,OAA3B;AACAnB,2BAAOK,SAAP,GAAmB,KAAnB;AACH,iBAVD,MAUM;AACFL,2BAAOK,SAAP,GAAmB,IAAnB;AACAF,4BAAQwB,GAAR,CAAY,SAAZ,EAAuB,QAAvB,EAAiC,qBAAjC;AAEH;AACJ,aAhBD;;AAkBA3B,mBAAO4B,YAAP,GAAsB,UAACpB,KAAD,EAAQqB,MAAR,EAAmB;AACrC,oBAAIC,QAAQ,CAAZ;AACAtB,sBAAMuB,WAAN,CAAkBC,OAAlB,CAA0B,UAACC,EAAD,EAAKC,GAAL,EAAUC,GAAV,EAAkB;AACxC,wBAAGF,GAAGG,SAAH,KAAiBP,MAApB,EAA2B;AACvBC;AACH;AACJ,iBAJD;AAKA,uBAAOA,KAAP;AACH,aARD;AAUH;;;;;;AAEL/B,sBAAsBsC,OAAtB,GAAgC,CAAC,QAAD,EAAU,oBAAV,EAAgC,WAAhC,EAA6C,SAA7C,CAAhC;QACQtC,qB,GAAAA,qB","file":"image-detail-controller.js","sourcesContent":["class ImageDetailController {\r\n    constructor($scope,  detailImageService, $mdDialog, toaster) {\r\n        this.init($scope,  detailImageService, $mdDialog,toaster);\r\n    }\r\n    init($scope, detailImageService, $mdDialog, toaster) {\r\n        $scope.showValid = false;\r\n        $scope.like = false;\r\n        $scope.dislike = false;\r\n\r\n        $scope.image = detailImageService.getImage();\r\n\r\n        $scope.setLike = () => {\r\n            $scope.like = !$scope.like;\r\n        };\r\n\r\n        $scope.setDislike = () => {\r\n            $scope.dislike = !$scope.dislike;\r\n        };\r\n\r\n        $scope.close = () => {\r\n            $mdDialog.cancel();\r\n        };\r\n\r\n        $scope.addComment = (nickname, text) => {\r\n            if($scope.commentForm.$valid){\r\n                var comment = {};\r\n                comment.own = nickname;\r\n                comment.text = text;\r\n                comment.data = Date.now();\r\n\r\n                $scope.nickname = '';\r\n                $scope.commentText = '';\r\n                $scope.image.comments.push(comment);\r\n                $scope.showValid = false;\r\n            }else {\r\n                $scope.showValid = true;\r\n                toaster.pop('warning', \"Ошибка\", \"Заполните все поля.\");\r\n\r\n            }\r\n        };\r\n\r\n        $scope.countActions = (image, action) => {\r\n            var count = 0;\r\n            image.image_likes.forEach((el, ind, arr) => {\r\n                if(el.like_type === action){\r\n                    count++;\r\n                }\r\n            });\r\n            return count;\r\n        };\r\n\r\n    }\r\n}\r\nImageDetailController.$inject = ['$scope','detailImageService', '$mdDialog', 'toaster'];\r\nexport {ImageDetailController}"]}